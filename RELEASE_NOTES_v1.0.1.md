# 慧眼识鸟 SuperBirdID v1.0.1 发布说明

**发布日期**: 2025年10月11日

---

## 🔥 v1.0.1 更新内容

### 主要修复

#### 📸 RAW格式支持重大改进
- **修复**: Nikon压缩RAW格式（NEF）无法加载的问题
- **新增**: 双策略RAW文件处理机制
  - 策略1：ExifTool提取内嵌JPEG（优先，速度快，支持压缩格式）
  - 策略2：rawpy完整RAW解码（备用，画质最佳）
- **测试**: 通过Nikon Z9压缩NEF (8256x5504) 测试验证
- **改进**: 增强错误提示，明确显示RAW处理方法和状态

#### 技术细节
**问题原因**：
- 部分Nikon相机（如Z9）使用压缩RAW格式
- rawpy库基于LibRaw，不支持某些压缩RAW
- 错误信息：`LibRawFileUnsupportedError: Unsupported file format`

**解决方案**：
- 优先使用ExifTool提取RAW文件内嵌的全分辨率JPEG
- 成功提取到8256x5504完整分辨率图像
- 保持向后兼容，rawpy作为备用方案

### 其他改进
- **优化**: RAW处理日志输出，显示使用的处理方法
- **增强**: 错误处理机制，提供更友好的用户提示
- **文档**: 更新代码注释，说明RAW处理策略

---

## ✨ 核心特性

### 🤖 AI智能识别
- **10,965种鸟类** - 覆盖全球主要鸟类物种
- **离线运行** - 无需联网，保护隐私
- **高精度识别** - 基于深度学习的AI模型
- **YOLO智能裁剪** - 自动检测并裁剪鸟类区域，提升识别准确度

### 📸 RAW格式全面支持
- **主流相机品牌** - Canon (CR2/CR3)、Nikon (NEF)、Sony (ARW)、Fujifilm (RAF)、DNG等
- **压缩RAW处理** - 支持Nikon压缩NEF等特殊格式
- **双策略解码** - ExifTool内嵌JPEG提取 + rawpy完整RAW解码
- **原生分辨率** - 保留RAW文件的完整画质信息

### 🌍 GPS智能定位
- **自动提取GPS** - 从照片EXIF读取拍摄位置
- **精确范围过滤** - 25km范围内的eBird观察记录
- **国家级过滤** - 支持50+国家/地区的离线鸟类数据
- **智能降级** - GPS失败时自动切换到国家级过滤

### 📝 元数据管理
- **自动写入EXIF** - 识别结果写入照片Title字段
- **完整描述** - 支持写入鸟种详细介绍到Caption字段
- **RAW文件支持** - 直接修改RAW文件元数据，无需转换

### 🎨 Lightroom集成
- **导出插件** - 无缝集成到Lightroom Classic工作流
- **批量处理** - 支持选中多张照片批量识别
- **API服务** - 内置HTTP API，支持插件调用

---

## 🔧 技术改进

### RAW格式处理
- 实现双策略RAW文件加载机制
- 优先使用ExifTool提取内嵌JPEG（全分辨率，速度快）
- 降级使用rawpy进行完整RAW解码
- 支持无内嵌JPEG的压缩RAW格式（如部分Nikon压缩NEF）

### 性能优化
- 模型加载优化，启动速度提升
- 智能图像预处理，根据图像尺寸自动调整策略
- GPU加速支持（YOLO检测自动使用MPS/CUDA）
- 多线程处理，提升批量识别效率

### 稳定性增强
- 完善的错误处理和用户提示
- ExifTool超时保护机制
- RAW处理失败时的友好错误信息
- 详细的处理日志输出

---

## 📦 系统要求

### macOS
- **系统版本**: macOS 11.0 (Big Sur) 或更高
- **架构**: Apple Silicon (M1/M2/M3) 原生支持
- **磁盘空间**: 至少 2GB 可用空间
- **内存**: 建议 8GB 或以上

### 可选组件
- **Lightroom Classic**: 用于插件集成（可选）
- **网络连接**: 仅用于首次GPS精确定位数据下载（可选）

---

## 🚀 安装说明

1. 下载 `SuperBirdIDV1_0_1.dmg`
2. 双击打开DMG镜像
3. 拖拽 `SuperBirdID.app` 到 `应用程序` 文件夹
4. 首次打开时，右键点击选择"打开"（macOS安全提示）
5. （可选）安装Lightroom插件，详见应用内说明

---

## 🔐 安全认证

- ✅ **Apple公证** - 通过Apple官方公证
- ✅ **代码签名** - Developer ID Application签名
- ✅ **Gatekeeper验证** - 通过macOS安全检查
- ✅ **SHA256校验** - `7bc81d966b3ddeb4875aaf30b695072b7100dab539d3cc2e97356d8499bcd2d1`

---

## 📚 使用指南

### 快速开始
1. 启动应用
2. 点击"选择图片"或拖拽照片到窗口
3. （可选）等待GPS定位和eBird数据加载
4. 查看识别结果和置信度
5. （可选）将识别结果写入照片EXIF

### GPS精确定位
- 照片包含GPS信息时，自动提取位置
- 首次使用会提示下载25km范围内的eBird数据
- 数据缓存30天，避免重复下载
- 可选择"GPS精确"、"国家级别"或"全球模式"

### RAW文件处理
- 支持拖拽RAW文件直接识别
- 自动检测RAW格式并选择最佳处理方式
- 显示RAW处理方法和原始分辨率
- 识别结果可直接写入RAW文件元数据

---

## 🐛 已知问题

- 部分极少见的RAW格式可能不支持（如Sigma X3F）
- 首次启动可能需要较长时间加载AI模型（约10-15秒）
- GPS精确定位需要网络连接（离线国家数据不受影响）

---

## 📮 反馈与支持

- **问题反馈**: [GitHub Issues](https://github.com/jamesphotography/superbirdid/issues)
- **功能建议**: 欢迎通过GitHub提交Feature Request
- **使用交流**: 详见应用内置使用说明

---

## 🙏 致谢

感谢以下开源项目：
- **Ultralytics YOLO** - 鸟类检测
- **PyTorch** - 深度学习框架
- **ExifTool** - EXIF元数据处理
- **rawpy/libraw** - RAW文件解码
- **eBird** - 鸟类分布数据

---

## 📄 许可协议

SuperBirdID 是免费软件，仅供个人学习和研究使用。

**版本**: v1.0.1
**发布日期**: 2025年10月11日
**构建时间**: 2025-10-11 14:56

---

*慧眼识鸟 - 专业鸟类识别，离线·智能·RAW·免费*
